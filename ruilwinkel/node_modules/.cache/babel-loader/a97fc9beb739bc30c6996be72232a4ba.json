{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = exports.EthereumEvents = void 0;\n\nvar _bind = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/bind\"));\n\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/slicedToArray\"));\n\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _construct2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/construct\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\n\nvar _indexOf = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/index-of\"));\n\nvar _filter = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/filter\"));\n\nvar _web = _interopRequireDefault(require(\"web3\"));\n\nvar _ParseObject = _interopRequireDefault(require(\"./ParseObject\"));\n\nvar _ParseQuery = _interopRequireDefault(require(\"./ParseQuery\"));\n\nvar _ParseUser = _interopRequireDefault(require(\"./ParseUser\"));\n\nvar _ParseACL = _interopRequireDefault(require(\"./ParseACL\"));\n\nvar _MoralisErd = _interopRequireDefault(require(\"./MoralisErd\"));\n\nvar _MoralisDot = _interopRequireDefault(require(\"./MoralisDot\"));\n\nvar _context9, _context10, _context11, _context12;\n\nvar EthereumEvents = {\n  CONNECT: 'connect',\n  DISCONNECT: 'disconnect',\n  ACCOUNTS_CHANGED: 'accountsChanged',\n  CHAIN_CHANGED: 'chainChanged'\n};\nexports.EthereumEvents = EthereumEvents;\nvar WARNING = 'Non ethereum enabled browser';\n\nfunction uniq(arr) {\n  return (0, _filter.default)(arr).call(arr, function (v, i) {\n    return (0, _indexOf.default)(arr).call(arr, v) === i;\n  });\n}\n\nvar MoralisWeb3 = /*#__PURE__*/function () {\n  function MoralisWeb3() {\n    (0, _classCallCheck2.default)(this, MoralisWeb3);\n    var MWeb3 = typeof _web.default === 'function' ? _web.default : window.Web3;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return (0, _construct2.default)(MWeb3, args);\n  }\n\n  (0, _createClass2.default)(MoralisWeb3, null, [{\n    key: \"enable\",\n    value: function () {\n      var _enable = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {\n        var _window$web;\n\n        var MWeb3, provider, ethereum, web3;\n        return _regenerator.default.wrap(function (_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                MWeb3 = typeof _web.default === 'function' ? _web.default : window.Web3;\n                provider = (_window$web = window.web3) === null || _window$web === void 0 ? void 0 : _window$web.currentProvider;\n                ethereum = window.ethereum;\n\n                if (!(provider !== null && provider !== void 0 && provider.isTrust)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", new MWeb3(provider));\n\n              case 5:\n                if (!ethereum) {\n                  _context.next = 10;\n                  break;\n                }\n\n                web3 = new MWeb3(ethereum);\n                _context.next = 9;\n                return ethereum.enable();\n\n              case 9:\n                return _context.abrupt(\"return\", web3);\n\n              case 10:\n                if (!provider) {\n                  _context.next = 12;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", new MWeb3(provider));\n\n              case 12:\n                throw new Error(WARNING);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function () {\n        return _enable.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"isDotAuth\",\n    value: function (options) {\n      switch (options === null || options === void 0 ? void 0 : options.type) {\n        case 'dot':\n        case 'polkadot':\n        case 'kusama':\n          return true;\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"isElrondAuth\",\n    value: function (options) {\n      switch (options === null || options === void 0 ? void 0 : options.type) {\n        case 'erd':\n        case 'elrond':\n          return true;\n\n        default:\n          return false;\n      }\n    }\n  }, {\n    key: \"authenticate\",\n    value: function () {\n      var _authenticate = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(options) {\n        var _context2, _user$get;\n\n        var isLoggedIn, web3, data, accounts, accountsLower, _accountsLower, ethAddress, signature, authData, user;\n\n        return _regenerator.default.wrap(function (_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return _ParseUser.default.current();\n\n              case 2:\n                isLoggedIn = _context3.sent;\n\n                if (!isLoggedIn) {\n                  _context3.next = 6;\n                  break;\n                }\n\n                _context3.next = 6;\n                return _ParseUser.default.logOut();\n\n              case 6:\n                if (!MoralisWeb3.isDotAuth(options)) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", _MoralisDot.default.authenticate(options));\n\n              case 8:\n                if (!MoralisWeb3.isElrondAuth(options)) {\n                  _context3.next = 10;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", _MoralisErd.default.authenticate(options));\n\n              case 10:\n                _context3.next = 12;\n                return MoralisWeb3.enable();\n\n              case 12:\n                web3 = _context3.sent;\n                data = MoralisWeb3.getSigningData();\n                _context3.next = 16;\n                return web3.eth.getAccounts();\n\n              case 16:\n                accounts = _context3.sent;\n                accountsLower = (0, _map.default)(accounts).call(accounts, function (v) {\n                  return v.toLowerCase();\n                });\n                _accountsLower = (0, _slicedToArray2.default)(accountsLower, 1), ethAddress = _accountsLower[0];\n\n                if (ethAddress) {\n                  _context3.next = 21;\n                  break;\n                }\n\n                throw new Error('Address not found');\n\n              case 21:\n                _context3.next = 23;\n                return web3.eth.personal.sign(data, ethAddress, '');\n\n              case 23:\n                signature = _context3.sent;\n\n                if (signature) {\n                  _context3.next = 26;\n                  break;\n                }\n\n                throw new Error('Data not signed');\n\n              case 26:\n                authData = {\n                  id: ethAddress,\n                  signature: signature,\n                  data: data\n                };\n                _context3.next = 29;\n                return _ParseUser.default.logInWith('moralisEth', {\n                  authData: authData\n                });\n\n              case 29:\n                user = _context3.sent;\n                _context3.next = 32;\n                return user.setACL(new _ParseACL.default(user));\n\n              case 32:\n                if (user) {\n                  _context3.next = 34;\n                  break;\n                }\n\n                throw new Error('Could not get user');\n\n              case 34:\n                user.set('accounts', uniq((0, _concat.default)(_context2 = []).call(_context2, accountsLower, (_user$get = user.get('accounts')) !== null && _user$get !== void 0 ? _user$get : [])));\n                user.set('ethAddress', ethAddress);\n                _context3.next = 38;\n                return user.save();\n\n              case 38:\n                return _context3.abrupt(\"return\", user);\n\n              case 39:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function () {\n        return _authenticate.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"link\",\n    value: function () {\n      var _link = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3(account) {\n        var _context4, _user$get2;\n\n        var web3, data, user, ethAddress, EthAddress, query, ethAddressRecord, signature, authData;\n        return _regenerator.default.wrap(function (_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return MoralisWeb3.enable();\n\n              case 2:\n                web3 = _context5.sent;\n                data = MoralisWeb3.getSigningData();\n                _context5.next = 6;\n                return _ParseUser.default.current();\n\n              case 6:\n                user = _context5.sent;\n                ethAddress = account.toLowerCase();\n                EthAddress = _ParseObject.default.extend('_EthAddress');\n                query = new _ParseQuery.default(EthAddress);\n                _context5.next = 12;\n                return query.get(ethAddress).catch(function () {\n                  return null;\n                });\n\n              case 12:\n                ethAddressRecord = _context5.sent;\n\n                if (ethAddressRecord) {\n                  _context5.next = 20;\n                  break;\n                }\n\n                _context5.next = 16;\n                return web3.eth.personal.sign(data, account, '');\n\n              case 16:\n                signature = _context5.sent;\n                authData = {\n                  id: ethAddress,\n                  signature: signature,\n                  data: data\n                };\n                _context5.next = 20;\n                return user.linkWith('moralisEth', {\n                  authData: authData\n                });\n\n              case 20:\n                user.set('accounts', uniq((0, _concat.default)(_context4 = [ethAddress]).call(_context4, (_user$get2 = user.get('accounts')) !== null && _user$get2 !== void 0 ? _user$get2 : [])));\n                user.set('ethAddress', ethAddress);\n                _context5.next = 24;\n                return user.save();\n\n              case 24:\n                return _context5.abrupt(\"return\", user);\n\n              case 25:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function () {\n        return _link.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"unlink\",\n    value: function () {\n      var _unlink = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4(account) {\n        var _user$get3;\n\n        var accountsLower, EthAddress, query, ethAddressRecord, user, accounts, nextAccounts;\n        return _regenerator.default.wrap(function (_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                accountsLower = account.toLowerCase();\n                EthAddress = _ParseObject.default.extend('_EthAddress');\n                query = new _ParseQuery.default(EthAddress);\n                _context6.next = 5;\n                return query.get(accountsLower);\n\n              case 5:\n                ethAddressRecord = _context6.sent;\n                _context6.next = 8;\n                return ethAddressRecord.destroy();\n\n              case 8:\n                _context6.next = 10;\n                return _ParseUser.default.current();\n\n              case 10:\n                user = _context6.sent;\n                accounts = (_user$get3 = user.get('accounts')) !== null && _user$get3 !== void 0 ? _user$get3 : [];\n                nextAccounts = (0, _filter.default)(accounts).call(accounts, function (v) {\n                  return v !== accountsLower;\n                });\n                user.set('accounts', nextAccounts);\n                user.set('ethAddress', nextAccounts[0]);\n                _context6.next = 17;\n                return user._unlinkFrom('moralisEth');\n\n              case 17:\n                _context6.next = 19;\n                return user.save();\n\n              case 19:\n                return _context6.abrupt(\"return\", user);\n\n              case 20:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      return function () {\n        return _unlink.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getAllERC20\",\n    value: function () {\n      var _getAllERC = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee5() {\n        var _ref,\n            chain,\n            address,\n            result,\n            _args5 = arguments;\n\n        return _regenerator.default.wrap(function (_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _ref = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : {}, chain = _ref.chain, address = _ref.address;\n                _context7.next = 3;\n                return Moralis.Cloud.run('getAllERC20', {\n                  chain: chain,\n                  address: address\n                });\n\n              case 3:\n                result = _context7.sent;\n                return _context7.abrupt(\"return\", result);\n\n              case 5:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      return function () {\n        return _getAllERC.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getERC20\",\n    value: function () {\n      var _getERC = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee6() {\n        var _ref2,\n            chain,\n            address,\n            symbol,\n            result,\n            _args6 = arguments;\n\n        return _regenerator.default.wrap(function (_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _ref2 = _args6.length > 0 && _args6[0] !== undefined ? _args6[0] : {}, chain = _ref2.chain, address = _ref2.address, symbol = _ref2.symbol;\n                result = Moralis.Cloud.run('getERC20', {\n                  chain: chain,\n                  address: address,\n                  symbol: symbol\n                });\n                return _context8.abrupt(\"return\", result);\n\n              case 3:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      return function () {\n        return _getERC.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"getNFTs\",\n    value: function () {\n      var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref3$chain = _ref3.chain,\n          chain = _ref3$chain === void 0 ? 'Eth' : _ref3$chain,\n          _ref3$address = _ref3.address,\n          address = _ref3$address === void 0 ? '' : _ref3$address;\n\n      return Moralis.Cloud.run('getNFTs', {\n        chain: chain,\n        address: address\n      });\n    }\n  }, {\n    key: \"getNFTsCount\",\n    value: function () {\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref4$chain = _ref4.chain,\n          chain = _ref4$chain === void 0 ? 'Eth' : _ref4$chain,\n          _ref4$address = _ref4.address,\n          address = _ref4$address === void 0 ? '' : _ref4$address;\n\n      return Moralis.Cloud.run('getNFTsCount', {\n        chain: chain,\n        address: address\n      });\n    }\n  }, {\n    key: \"getTransactions\",\n    value: function () {\n      var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref5$chain = _ref5.chain,\n          chain = _ref5$chain === void 0 ? 'Eth' : _ref5$chain,\n          _ref5$address = _ref5.address,\n          address = _ref5$address === void 0 ? '' : _ref5$address,\n          _ref5$order = _ref5.order,\n          order = _ref5$order === void 0 ? 'desc' : _ref5$order;\n\n      return Moralis.Cloud.run('getTransactions', {\n        chain: chain,\n        address: address,\n        order: order\n      });\n    }\n  }, {\n    key: \"getTransactionsCount\",\n    value: function () {\n      var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref6$chain = _ref6.chain,\n          chain = _ref6$chain === void 0 ? 'Eth' : _ref6$chain,\n          _ref6$address = _ref6.address,\n          address = _ref6$address === void 0 ? '' : _ref6$address;\n\n      return Moralis.Cloud.run('getTransactionsCount', {\n        chain: chain,\n        address: address\n      });\n    }\n  }, {\n    key: \"on\",\n    value: function (eventName, cb) {\n      var ethereum = window.ethereum;\n\n      if (!ethereum || !ethereum.on) {\n        console.warn(WARNING);\n        return function () {\n          console.warn(WARNING);\n        };\n      }\n\n      ethereum.on(eventName, cb);\n      return function () {\n        console.warn('UNSUB NOT SUPPORTED');\n      };\n    }\n  }, {\n    key: \"getSigningData\",\n    value: function () {\n      return \"Moralis Authentication\";\n    }\n  }]);\n  return MoralisWeb3;\n}();\n\nMoralisWeb3.onConnect = (0, _bind.default)(_context9 = MoralisWeb3.on).call(_context9, MoralisWeb3, EthereumEvents.CONNECT);\nMoralisWeb3.onDisconnect = (0, _bind.default)(_context10 = MoralisWeb3.on).call(_context10, MoralisWeb3, EthereumEvents.DISCONNECT);\nMoralisWeb3.onChainChanged = (0, _bind.default)(_context11 = MoralisWeb3.on).call(_context11, MoralisWeb3, EthereumEvents.CHAIN_CHANGED);\nMoralisWeb3.onAccountsChanged = (0, _bind.default)(_context12 = MoralisWeb3.on).call(_context12, MoralisWeb3, EthereumEvents.ACCOUNTS_CHANGED);\nvar _default = MoralisWeb3;\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/Stygal/Documents/Zuyd/blok 4/Casusblok-4-jaar-2-groep-F4/ruilwinkel/node_modules/moralis/lib/browser/MoralisWeb3.js"],"names":["_interopRequireDefault","require","_Object$defineProperty","exports","value","default","EthereumEvents","_bind","_concat","_slicedToArray2","_map","_regenerator","_asyncToGenerator2","_construct2","_classCallCheck2","_createClass2","_indexOf","_filter","_web","_ParseObject","_ParseQuery","_ParseUser","_ParseACL","_MoralisErd","_MoralisDot","_context9","_context10","_context11","_context12","CONNECT","DISCONNECT","ACCOUNTS_CHANGED","CHAIN_CHANGED","WARNING","uniq","arr","call","v","i","MoralisWeb3","MWeb3","window","Web3","_len","arguments","length","args","Array","_key","key","_enable","mark","_callee","_window$web","provider","ethereum","web3","wrap","_context","prev","next","currentProvider","isTrust","abrupt","enable","Error","stop","apply","options","type","_authenticate","_callee2","_context2","_user$get","isLoggedIn","data","accounts","accountsLower","_accountsLower","ethAddress","signature","authData","user","_context3","current","sent","logOut","isDotAuth","authenticate","isElrondAuth","getSigningData","eth","getAccounts","toLowerCase","personal","sign","id","logInWith","setACL","set","get","save","_link","_callee3","account","_context4","_user$get2","EthAddress","query","ethAddressRecord","_context5","extend","catch","linkWith","_unlink","_callee4","_user$get3","nextAccounts","_context6","destroy","_unlinkFrom","_getAllERC","_callee5","_ref","chain","address","result","_args5","_context7","undefined","Moralis","Cloud","run","_getERC","_callee6","_ref2","symbol","_args6","_context8","_ref3","_ref3$chain","_ref3$address","_ref4","_ref4$chain","_ref4$address","_ref5","_ref5$chain","_ref5$address","_ref5$order","order","_ref6","_ref6$chain","_ref6$address","eventName","cb","on","console","warn","onConnect","onDisconnect","onChainChanged","onAccountsChanged","_default"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\r\n\r\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\r\n\r\n_Object$defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\n\r\nexports.default = exports.EthereumEvents = void 0;\r\n\r\nvar _bind = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/bind\"));\r\n\r\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\r\n\r\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/slicedToArray\"));\r\n\r\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\r\n\r\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\r\n\r\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\r\n\r\nvar _construct2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/construct\"));\r\n\r\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\r\n\r\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\r\n\r\nvar _indexOf = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/index-of\"));\r\n\r\nvar _filter = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/filter\"));\r\n\r\nvar _web = _interopRequireDefault(require(\"web3\"));\r\n\r\nvar _ParseObject = _interopRequireDefault(require(\"./ParseObject\"));\r\n\r\nvar _ParseQuery = _interopRequireDefault(require(\"./ParseQuery\"));\r\n\r\nvar _ParseUser = _interopRequireDefault(require(\"./ParseUser\"));\r\n\r\nvar _ParseACL = _interopRequireDefault(require(\"./ParseACL\"));\r\n\r\nvar _MoralisErd = _interopRequireDefault(require(\"./MoralisErd\"));\r\n\r\nvar _MoralisDot = _interopRequireDefault(require(\"./MoralisDot\"));\r\n\r\nvar _context9, _context10, _context11, _context12;\r\n\r\nvar EthereumEvents = {\r\n  CONNECT: 'connect',\r\n  DISCONNECT: 'disconnect',\r\n  ACCOUNTS_CHANGED: 'accountsChanged',\r\n  CHAIN_CHANGED: 'chainChanged'\r\n};\r\nexports.EthereumEvents = EthereumEvents;\r\nvar WARNING = 'Non ethereum enabled browser';\r\n\r\nfunction uniq(arr) {\r\n  return (0, _filter.default)(arr).call(arr, function (v, i) {\r\n    return (0, _indexOf.default)(arr).call(arr, v) === i;\r\n  });\r\n}\r\n\r\nvar MoralisWeb3 = /*#__PURE__*/function () {\r\n  function MoralisWeb3() {\r\n    (0, _classCallCheck2.default)(this, MoralisWeb3);\r\n    var MWeb3 = typeof _web.default === 'function' ? _web.default : window.Web3;\r\n\r\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\r\n      args[_key] = arguments[_key];\r\n    }\r\n\r\n    return (0, _construct2.default)(MWeb3, args);\r\n  }\r\n\r\n  (0, _createClass2.default)(MoralisWeb3, null, [{\r\n    key: \"enable\",\r\n    value: function () {\r\n      var _enable = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {\r\n        var _window$web;\r\n\r\n        var MWeb3, provider, ethereum, web3;\r\n        return _regenerator.default.wrap(function (_context) {\r\n          while (1) {\r\n            switch (_context.prev = _context.next) {\r\n              case 0:\r\n                MWeb3 = typeof _web.default === 'function' ? _web.default : window.Web3;\r\n                provider = (_window$web = window.web3) === null || _window$web === void 0 ? void 0 : _window$web.currentProvider;\r\n                ethereum = window.ethereum;\r\n\r\n                if (!(provider !== null && provider !== void 0 && provider.isTrust)) {\r\n                  _context.next = 5;\r\n                  break;\r\n                }\r\n\r\n                return _context.abrupt(\"return\", new MWeb3(provider));\r\n\r\n              case 5:\r\n                if (!ethereum) {\r\n                  _context.next = 10;\r\n                  break;\r\n                }\r\n\r\n                web3 = new MWeb3(ethereum);\r\n                _context.next = 9;\r\n                return ethereum.enable();\r\n\r\n              case 9:\r\n                return _context.abrupt(\"return\", web3);\r\n\r\n              case 10:\r\n                if (!provider) {\r\n                  _context.next = 12;\r\n                  break;\r\n                }\r\n\r\n                return _context.abrupt(\"return\", new MWeb3(provider));\r\n\r\n              case 12:\r\n                throw new Error(WARNING);\r\n\r\n              case 13:\r\n              case \"end\":\r\n                return _context.stop();\r\n            }\r\n          }\r\n        }, _callee);\r\n      }));\r\n\r\n      return function () {\r\n        return _enable.apply(this, arguments);\r\n      };\r\n    }()\r\n  }, {\r\n    key: \"isDotAuth\",\r\n    value: function (options) {\r\n      switch (options === null || options === void 0 ? void 0 : options.type) {\r\n        case 'dot':\r\n        case 'polkadot':\r\n        case 'kusama':\r\n          return true;\r\n\r\n        default:\r\n          return false;\r\n      }\r\n    }\r\n  }, {\r\n    key: \"isElrondAuth\",\r\n    value: function (options) {\r\n      switch (options === null || options === void 0 ? void 0 : options.type) {\r\n        case 'erd':\r\n        case 'elrond':\r\n          return true;\r\n\r\n        default:\r\n          return false;\r\n      }\r\n    }\r\n  }, {\r\n    key: \"authenticate\",\r\n    value: function () {\r\n      var _authenticate = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(options) {\r\n        var _context2, _user$get;\r\n\r\n        var isLoggedIn, web3, data, accounts, accountsLower, _accountsLower, ethAddress, signature, authData, user;\r\n\r\n        return _regenerator.default.wrap(function (_context3) {\r\n          while (1) {\r\n            switch (_context3.prev = _context3.next) {\r\n              case 0:\r\n                _context3.next = 2;\r\n                return _ParseUser.default.current();\r\n\r\n              case 2:\r\n                isLoggedIn = _context3.sent;\r\n\r\n                if (!isLoggedIn) {\r\n                  _context3.next = 6;\r\n                  break;\r\n                }\r\n\r\n                _context3.next = 6;\r\n                return _ParseUser.default.logOut();\r\n\r\n              case 6:\r\n                if (!MoralisWeb3.isDotAuth(options)) {\r\n                  _context3.next = 8;\r\n                  break;\r\n                }\r\n\r\n                return _context3.abrupt(\"return\", _MoralisDot.default.authenticate(options));\r\n\r\n              case 8:\r\n                if (!MoralisWeb3.isElrondAuth(options)) {\r\n                  _context3.next = 10;\r\n                  break;\r\n                }\r\n\r\n                return _context3.abrupt(\"return\", _MoralisErd.default.authenticate(options));\r\n\r\n              case 10:\r\n                _context3.next = 12;\r\n                return MoralisWeb3.enable();\r\n\r\n              case 12:\r\n                web3 = _context3.sent;\r\n                data = MoralisWeb3.getSigningData();\r\n                _context3.next = 16;\r\n                return web3.eth.getAccounts();\r\n\r\n              case 16:\r\n                accounts = _context3.sent;\r\n                accountsLower = (0, _map.default)(accounts).call(accounts, function (v) {\r\n                  return v.toLowerCase();\r\n                });\r\n                _accountsLower = (0, _slicedToArray2.default)(accountsLower, 1), ethAddress = _accountsLower[0];\r\n\r\n                if (ethAddress) {\r\n                  _context3.next = 21;\r\n                  break;\r\n                }\r\n\r\n                throw new Error('Address not found');\r\n\r\n              case 21:\r\n                _context3.next = 23;\r\n                return web3.eth.personal.sign(data, ethAddress, '');\r\n\r\n              case 23:\r\n                signature = _context3.sent;\r\n\r\n                if (signature) {\r\n                  _context3.next = 26;\r\n                  break;\r\n                }\r\n\r\n                throw new Error('Data not signed');\r\n\r\n              case 26:\r\n                authData = {\r\n                  id: ethAddress,\r\n                  signature: signature,\r\n                  data: data\r\n                };\r\n                _context3.next = 29;\r\n                return _ParseUser.default.logInWith('moralisEth', {\r\n                  authData: authData\r\n                });\r\n\r\n              case 29:\r\n                user = _context3.sent;\r\n                _context3.next = 32;\r\n                return user.setACL(new _ParseACL.default(user));\r\n\r\n              case 32:\r\n                if (user) {\r\n                  _context3.next = 34;\r\n                  break;\r\n                }\r\n\r\n                throw new Error('Could not get user');\r\n\r\n              case 34:\r\n                user.set('accounts', uniq((0, _concat.default)(_context2 = []).call(_context2, accountsLower, (_user$get = user.get('accounts')) !== null && _user$get !== void 0 ? _user$get : [])));\r\n                user.set('ethAddress', ethAddress);\r\n                _context3.next = 38;\r\n                return user.save();\r\n\r\n              case 38:\r\n                return _context3.abrupt(\"return\", user);\r\n\r\n              case 39:\r\n              case \"end\":\r\n                return _context3.stop();\r\n            }\r\n          }\r\n        }, _callee2);\r\n      }));\r\n\r\n      return function () {\r\n        return _authenticate.apply(this, arguments);\r\n      };\r\n    }()\r\n  }, {\r\n    key: \"link\",\r\n    value: function () {\r\n      var _link = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3(account) {\r\n        var _context4, _user$get2;\r\n\r\n        var web3, data, user, ethAddress, EthAddress, query, ethAddressRecord, signature, authData;\r\n        return _regenerator.default.wrap(function (_context5) {\r\n          while (1) {\r\n            switch (_context5.prev = _context5.next) {\r\n              case 0:\r\n                _context5.next = 2;\r\n                return MoralisWeb3.enable();\r\n\r\n              case 2:\r\n                web3 = _context5.sent;\r\n                data = MoralisWeb3.getSigningData();\r\n                _context5.next = 6;\r\n                return _ParseUser.default.current();\r\n\r\n              case 6:\r\n                user = _context5.sent;\r\n                ethAddress = account.toLowerCase();\r\n                EthAddress = _ParseObject.default.extend('_EthAddress');\r\n                query = new _ParseQuery.default(EthAddress);\r\n                _context5.next = 12;\r\n                return query.get(ethAddress).catch(function () {\r\n                  return null;\r\n                });\r\n\r\n              case 12:\r\n                ethAddressRecord = _context5.sent;\r\n\r\n                if (ethAddressRecord) {\r\n                  _context5.next = 20;\r\n                  break;\r\n                }\r\n\r\n                _context5.next = 16;\r\n                return web3.eth.personal.sign(data, account, '');\r\n\r\n              case 16:\r\n                signature = _context5.sent;\r\n                authData = {\r\n                  id: ethAddress,\r\n                  signature: signature,\r\n                  data: data\r\n                };\r\n                _context5.next = 20;\r\n                return user.linkWith('moralisEth', {\r\n                  authData: authData\r\n                });\r\n\r\n              case 20:\r\n                user.set('accounts', uniq((0, _concat.default)(_context4 = [ethAddress]).call(_context4, (_user$get2 = user.get('accounts')) !== null && _user$get2 !== void 0 ? _user$get2 : [])));\r\n                user.set('ethAddress', ethAddress);\r\n                _context5.next = 24;\r\n                return user.save();\r\n\r\n              case 24:\r\n                return _context5.abrupt(\"return\", user);\r\n\r\n              case 25:\r\n              case \"end\":\r\n                return _context5.stop();\r\n            }\r\n          }\r\n        }, _callee3);\r\n      }));\r\n\r\n      return function () {\r\n        return _link.apply(this, arguments);\r\n      };\r\n    }()\r\n  }, {\r\n    key: \"unlink\",\r\n    value: function () {\r\n      var _unlink = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4(account) {\r\n        var _user$get3;\r\n\r\n        var accountsLower, EthAddress, query, ethAddressRecord, user, accounts, nextAccounts;\r\n        return _regenerator.default.wrap(function (_context6) {\r\n          while (1) {\r\n            switch (_context6.prev = _context6.next) {\r\n              case 0:\r\n                accountsLower = account.toLowerCase();\r\n                EthAddress = _ParseObject.default.extend('_EthAddress');\r\n                query = new _ParseQuery.default(EthAddress);\r\n                _context6.next = 5;\r\n                return query.get(accountsLower);\r\n\r\n              case 5:\r\n                ethAddressRecord = _context6.sent;\r\n                _context6.next = 8;\r\n                return ethAddressRecord.destroy();\r\n\r\n              case 8:\r\n                _context6.next = 10;\r\n                return _ParseUser.default.current();\r\n\r\n              case 10:\r\n                user = _context6.sent;\r\n                accounts = (_user$get3 = user.get('accounts')) !== null && _user$get3 !== void 0 ? _user$get3 : [];\r\n                nextAccounts = (0, _filter.default)(accounts).call(accounts, function (v) {\r\n                  return v !== accountsLower;\r\n                });\r\n                user.set('accounts', nextAccounts);\r\n                user.set('ethAddress', nextAccounts[0]);\r\n                _context6.next = 17;\r\n                return user._unlinkFrom('moralisEth');\r\n\r\n              case 17:\r\n                _context6.next = 19;\r\n                return user.save();\r\n\r\n              case 19:\r\n                return _context6.abrupt(\"return\", user);\r\n\r\n              case 20:\r\n              case \"end\":\r\n                return _context6.stop();\r\n            }\r\n          }\r\n        }, _callee4);\r\n      }));\r\n\r\n      return function () {\r\n        return _unlink.apply(this, arguments);\r\n      };\r\n    }()\r\n  }, {\r\n    key: \"getAllERC20\",\r\n    value: function () {\r\n      var _getAllERC = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee5() {\r\n        var _ref,\r\n            chain,\r\n            address,\r\n            result,\r\n            _args5 = arguments;\r\n\r\n        return _regenerator.default.wrap(function (_context7) {\r\n          while (1) {\r\n            switch (_context7.prev = _context7.next) {\r\n              case 0:\r\n                _ref = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : {}, chain = _ref.chain, address = _ref.address;\r\n                _context7.next = 3;\r\n                return Moralis.Cloud.run('getAllERC20', {\r\n                  chain: chain,\r\n                  address: address\r\n                });\r\n\r\n              case 3:\r\n                result = _context7.sent;\r\n                return _context7.abrupt(\"return\", result);\r\n\r\n              case 5:\r\n              case \"end\":\r\n                return _context7.stop();\r\n            }\r\n          }\r\n        }, _callee5);\r\n      }));\r\n\r\n      return function () {\r\n        return _getAllERC.apply(this, arguments);\r\n      };\r\n    }()\r\n  }, {\r\n    key: \"getERC20\",\r\n    value: function () {\r\n      var _getERC = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee6() {\r\n        var _ref2,\r\n            chain,\r\n            address,\r\n            symbol,\r\n            result,\r\n            _args6 = arguments;\r\n\r\n        return _regenerator.default.wrap(function (_context8) {\r\n          while (1) {\r\n            switch (_context8.prev = _context8.next) {\r\n              case 0:\r\n                _ref2 = _args6.length > 0 && _args6[0] !== undefined ? _args6[0] : {}, chain = _ref2.chain, address = _ref2.address, symbol = _ref2.symbol;\r\n                result = Moralis.Cloud.run('getERC20', {\r\n                  chain: chain,\r\n                  address: address,\r\n                  symbol: symbol\r\n                });\r\n                return _context8.abrupt(\"return\", result);\r\n\r\n              case 3:\r\n              case \"end\":\r\n                return _context8.stop();\r\n            }\r\n          }\r\n        }, _callee6);\r\n      }));\r\n\r\n      return function () {\r\n        return _getERC.apply(this, arguments);\r\n      };\r\n    }()\r\n  }, {\r\n    key: \"getNFTs\",\r\n    value: function () {\r\n      var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\r\n          _ref3$chain = _ref3.chain,\r\n          chain = _ref3$chain === void 0 ? 'Eth' : _ref3$chain,\r\n          _ref3$address = _ref3.address,\r\n          address = _ref3$address === void 0 ? '' : _ref3$address;\r\n\r\n      return Moralis.Cloud.run('getNFTs', {\r\n        chain: chain,\r\n        address: address\r\n      });\r\n    }\r\n  }, {\r\n    key: \"getNFTsCount\",\r\n    value: function () {\r\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\r\n          _ref4$chain = _ref4.chain,\r\n          chain = _ref4$chain === void 0 ? 'Eth' : _ref4$chain,\r\n          _ref4$address = _ref4.address,\r\n          address = _ref4$address === void 0 ? '' : _ref4$address;\r\n\r\n      return Moralis.Cloud.run('getNFTsCount', {\r\n        chain: chain,\r\n        address: address\r\n      });\r\n    }\r\n  }, {\r\n    key: \"getTransactions\",\r\n    value: function () {\r\n      var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\r\n          _ref5$chain = _ref5.chain,\r\n          chain = _ref5$chain === void 0 ? 'Eth' : _ref5$chain,\r\n          _ref5$address = _ref5.address,\r\n          address = _ref5$address === void 0 ? '' : _ref5$address,\r\n          _ref5$order = _ref5.order,\r\n          order = _ref5$order === void 0 ? 'desc' : _ref5$order;\r\n\r\n      return Moralis.Cloud.run('getTransactions', {\r\n        chain: chain,\r\n        address: address,\r\n        order: order\r\n      });\r\n    }\r\n  }, {\r\n    key: \"getTransactionsCount\",\r\n    value: function () {\r\n      var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\r\n          _ref6$chain = _ref6.chain,\r\n          chain = _ref6$chain === void 0 ? 'Eth' : _ref6$chain,\r\n          _ref6$address = _ref6.address,\r\n          address = _ref6$address === void 0 ? '' : _ref6$address;\r\n\r\n      return Moralis.Cloud.run('getTransactionsCount', {\r\n        chain: chain,\r\n        address: address\r\n      });\r\n    }\r\n  }, {\r\n    key: \"on\",\r\n    value: function (eventName, cb) {\r\n      var ethereum = window.ethereum;\r\n\r\n      if (!ethereum || !ethereum.on) {\r\n        console.warn(WARNING);\r\n        return function () {\r\n          console.warn(WARNING);\r\n        };\r\n      }\r\n\r\n      ethereum.on(eventName, cb);\r\n      return function () {\r\n        console.warn('UNSUB NOT SUPPORTED');\r\n      };\r\n    }\r\n  }, {\r\n    key: \"getSigningData\",\r\n    value: function () {\r\n      return \"Moralis Authentication\";\r\n    }\r\n  }]);\r\n  return MoralisWeb3;\r\n}();\r\n\r\nMoralisWeb3.onConnect = (0, _bind.default)(_context9 = MoralisWeb3.on).call(_context9, MoralisWeb3, EthereumEvents.CONNECT);\r\nMoralisWeb3.onDisconnect = (0, _bind.default)(_context10 = MoralisWeb3.on).call(_context10, MoralisWeb3, EthereumEvents.DISCONNECT);\r\nMoralisWeb3.onChainChanged = (0, _bind.default)(_context11 = MoralisWeb3.on).call(_context11, MoralisWeb3, EthereumEvents.CHAIN_CHANGED);\r\nMoralisWeb3.onAccountsChanged = (0, _bind.default)(_context12 = MoralisWeb3.on).call(_context12, MoralisWeb3, EthereumEvents.ACCOUNTS_CHANGED);\r\nvar _default = MoralisWeb3;\r\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}